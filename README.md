# Killfeed
FPSゲームでよくあるキルログを表示するオーバーレイ

## 機能
- FPSゲームによくあるキルログをオーバーレイ表示する。
- 周囲で起きたキル/デスを集計し、自アライアンスのキルデスレートを表示する。
- 周囲で起きた1分以内のキル/デスを表記する。

## インストール
Overlayを追加し、CustomからMiniParceを選択し、表示するURLに以下をコピペしてください。

```
https://takoyaki313.github.io/killfeed/main.html
```

## 前提Plugin
[ngld/OverlayPlugin](https://github.com/ngld/OverlayPlugin)

[ravahn/FFXIV_ACT_Plugin](https://github.com/ravahn/FFXIV_ACT_Plugin)

## 動作例
![4](https://user-images.githubusercontent.com/40759792/135251367-0b79e1ed-9b75-4398-b127-0b530f32b7e6.PNG)　
### 項目の説明
![2](https://user-images.githubusercontent.com/40759792/135261504-1cf54532-17aa-4afa-81ee-faa0fbf19c32.PNG)  
1. エリア名  
2. 残り試合時間
3. 設定
4. 未実装
5. アライアンス全体の合計キル数
6. アライアンス全体の1分間キル数
7. アライアンス全体の合計デス数
8. アライアンス全体の1分間デス数
9. キルレート
10. 殺した人
11. 死んだ人
### 設定ができる項目　
![3](https://user-images.githubusercontent.com/40759792/135247961-3736c520-3826-42d8-b825-288c3a68b7d5.PNG)

## オーバーレイ分割をする / [Gorge-Overlay](https://github.com/takoyaki313/Gorge-Overlay)も使用している場合
リポジトリのzipをダウンロードし、DevelopとついたhtmlをPluginに読み込ませてください。  拡大縮小が連動してしまう問題はこれで解決できるはずです。    
この方法の場合はアップデートが自動で反映されないため、動作しなくなった場合は再度ダウンロードが必要になるかもしれません。  
## しくみ
### キル/デス判定
`xxxは、yyyを倒した。`もしくは、`xxxは、yyyに倒された。`というログを元にオーバーレイを表示しています。  
そのため、忍者の分身等の攻撃で倒された場合はプレイヤー表記がされません。
### キルレートの計算
アライアンス全体の、( 合計キル数 + 1 ) / ( 合計デス数 + 1 )で行っています。  
### タイマースタート判定
#### FL
`フロントラインにxxx団として参加しました！`というログが表示されてから一定時間後にタイマーがスタートされるようになっています。  
個々の環境によってずれると思うので設定画面から変更して下さい。  
単位はmsでデフォルトは43000になっています。
#### RW
ゲートが開いた際のログを読み取ってタイマーがスタートします。そのため、タイマーと実際の試合時間が大きくずれることは無いはずです。  
そのため、設定画面に時間調整の欄は設置していません。  
今のところ100％キレイに動いているので問題があればお知らせください。
## 仕様
- 誰のキルかわからないキル（忍者の分身等）がある。
- 遠くで死んだ/殺したデータが届かない。

## 既知のバグ
- 途中参加するとタイマーがスタートしないときがある。
- 味方が死にまくって試合に負けてしまう。
